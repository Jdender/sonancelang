import std::{
    env -> { args, pwd },
    fs -> { read_file, path::join },
    monad -> all_for_one,
};

func main() -> Future[Void] {
    let files = args
        .split(" ")
        .map(func (file) {
            join(pwd(), file)
                .read_file()
        })
        .all_for_one()
        .use;

    for result in files {
        match result {
            Okay: file -> print(file.content),
            Error: reason -> {
                print("An error occurred while trying to read a file: ${reason}");
                return;
            }
        }
    }
}
