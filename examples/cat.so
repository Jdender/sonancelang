import std:{
    env::{ args, pwd },
    fs::{ read_file, path:join },
    futures::await_all,
};

func main() -> Future<void> {
    let files = args
        .split(' ')
        .map(|path| join(pwd(), path) |> read_file)
        |> await_all?;

    if let Some(error) = files.find(matches!(?, Error(_))) {
        println!("An error occurred while trying to read a file: ${error}");
        return;
    }

    for file of files {
        println!(file.content.to_string());
    }
}
